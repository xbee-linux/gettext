schema-version: 1.0

type: builder


const:
  srcDir: /usr/src
  exportDir: /opt/gettext


provision:
  - url:
      from: https://ftp.gnu.org/gnu/gettext/gettext-{% version %}.tar.gz
      todir: "{% srcDir %}"

build:
  - shell:
      cmds:
        - ./configure --prefix={% exportDir %}/usr --disable-static --docdir={% exportDir %}/usr/share/doc/gettext-{% version %}
        - make
#        - make check
        - make install
        - chmod -v 0755 {% exportDir %}/usr/lib/preloadable_libintl.so
      directory: "{% srcDir %}/gettext-{% version %}"
  - export: "{% exportDir %}"

